"use strict";(globalThis["webpackChunkfront_end_carvago"]=globalThis["webpackChunkfront_end_carvago"]||[]).push([[406],{3406:(e,a,o)=>{o.r(a),o.d(a,{default:()=>C});o(702);var l=o(9835),t=o(1957);const n={class:"q-pa-md tabsLoginCreate"},s={class:"q-gutter-y-md",style:{"max-width":"400px"}},r={class:"q-pa-md Teste"},i=(0,l._)("p",{class:"InputFormLoginText"},"Nome",-1),u=(0,l._)("p",{class:"InputFormLoginText"},"E-mail",-1),c=(0,l._)("p",{class:"InputFormLoginText"},"Password",-1);function m(e,a,o,m,p,d){const g=(0,l.up)("q-tab"),v=(0,l.up)("q-tabs"),f=(0,l.up)("q-input"),b=(0,l.up)("q-icon"),w=(0,l.up)("q-btn");return(0,l.wg)(),(0,l.iD)(l.HY,null,[(0,l._)("div",n,[(0,l._)("div",s,[(0,l.Wm)(v,{modelValue:m.tab,"onUpdate:modelValue":a[1]||(a[1]=e=>m.tab=e),dense:"",align:"justify"},{default:(0,l.w5)((()=>[(0,l.Wm)(g,{class:"text-blue",name:"login",label:"Login",onClick:a[0]||(a[0]=e=>m.goTo("login"))}),(0,l.Wm)(g,{class:"text-blue",name:"create",label:"Criar conta"})])),_:1},8,["modelValue"])])]),(0,l._)("div",r,[(0,l._)("form",{class:"q-gutter-md Teste",onSubmit:a[7]||(a[7]=(0,t.iM)(((...e)=>m.onSubmit&&m.onSubmit(...e)),["prevent","stop"])),onReset:a[8]||(a[8]=(0,t.iM)(((...e)=>m.onReset&&m.onReset(...e)),["prevent","stop"]))},[i,(0,l.Wm)(f,{filled:"",modelValue:m.nome,"onUpdate:modelValue":a[2]||(a[2]=e=>m.nome=e),ref:"nomeRef","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor preencha o campo"],class:"InputFormLogin"},null,8,["modelValue","rules"]),u,(0,l.Wm)(f,{filled:"",modelValue:m.email,"onUpdate:modelValue":a[3]||(a[3]=e=>m.email=e),ref:"emailRef","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor preencha o campo"],class:"InputFormLogin"},null,8,["modelValue","rules"]),c,(0,l.Wm)(f,{modelValue:m.pass,"onUpdate:modelValue":a[5]||(a[5]=e=>m.pass=e),ref:"passRef",filled:"",type:m.isPwd?"password":"text","lazy-rules":"",rules:[e=>e&&e.length>0||"Por favor preencha o campo"],class:"InputFormLogin"},{append:(0,l.w5)((()=>[(0,l.Wm)(b,{name:m.isPwd?"visibility_off":"visibility",class:"cursor-pointer",onClick:a[4]||(a[4]=e=>m.isPwd=!m.isPwd)},null,8,["name"])])),_:1},8,["modelValue","type","rules"]),(0,l._)("p",{class:"InputFormLoginTermosCondicoes",onClick:a[6]||(a[6]=e=>m.goTo(""))},"Ao clicar no botão continuar aceito os Termos e Condições"),(0,l._)("div",null,[(0,l.Wm)(w,{class:"InputFormLoginBtnLogin",label:"Criar Conta",type:"submit",color:"primary"})])],32)])],64)}o(8964),o(6204),o(8170),o(5231),o(7725),o(9359),o(6408),o(940),o(3667);var p=o(499),d=o(9302),g=o(9981),v=o.n(g),f=o(2030);function b(e){const a="=".repeat((4-e.length%4)%4),o=(e+a).replace(/-/g,"+").replace(/_/g,"/"),l=window.atob(o),t=new Uint8Array(l.length);for(let n=0;n<l.length;++n)t[n]=l.charCodeAt(n);return t}const w={name:"InicioCreatPage",setup(){const e=(0,d.Z)(),a=(0,p.iH)(null),o=(0,p.iH)(null),l=(0,p.iH)(null),t=(0,p.iH)(null),n=(0,p.iH)(null),s=(0,p.iH)(null);async function r(t){let n=null;if(t){const e=localStorage.getItem("sub_token");n=await v()({method:"post",url:f.Z.URL+"/create",params:{nome:a.value,email:o.value,password:l.value},data:{subscription_token:e}})}else n=await v()({method:"post",url:f.Z.URL+"/create",params:{nome:a.value,email:o.value,password:l.value}});const s=await n.data;s.resultado>0?(o.value="",l.value="",sessionStorage.setItem("IdentificadorCarvago",s.resultado),window.location="#/home"):(-1===s.resultado&&e.notify({color:"negative",message:"Registo falhou! - Dados em falta."}),-3===s.resultado&&(e.notify({color:"negative",message:"Impossivel criar conta - Email já está em uso"}),o.value=null,l.value=null))}async function i(){let e=!0;try{const a=await v()({method:"get",url:f.Z.URL+"/subscription"}),o=await a.data;if(localStorage.setItem("applicationServerPublicKey",o.public_key),"serviceWorker"in navigator&&"PushManager"in window){console.log("Service Worker and Push is supported");const a=f.Z.URL+"/sw.js";navigator.serviceWorker.register(a).then((function(a){console.log("Service Worker is registered",a);const o=localStorage.getItem("applicationServerPublicKey"),l=b(o);a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:l}).then((async function(e){console.log("User is subscribed."),localStorage.setItem("sub_token",JSON.stringify(e)),await r(!0)})).catch((function(a){e=!1,console.error("Service Worker Error",a)}))})).catch((function(a){e=!1,console.error("Service Worker Error",a)}))}else e=!1}catch(a){alert(a),e=!1}return e}return{goTo(e){window.location="#/"+e},async onSubmit(){if(t.value.validate(),n.value.validate(),s.value.validate(),o.value.hasError||l.value.hasError||s.value.hasError);else{const e=await i();e||await r(!1)}},onReset(){o.value=null,l.value=null,o.value.resetValidation(),l.value.resetValidation()},tab:(0,p.iH)("create"),nome:a,nomeRef:s,email:o,emailRef:t,pass:l,passRef:n,isPwd:(0,p.iH)(!0)}}};var h=o(1639),y=o(7817),_=o(900),I=o(6611),k=o(2857),S=o(9379),L=o(9984),R=o.n(L);const V=(0,h.Z)(w,[["render",m]]),C=V;R()(w,"components",{QTabs:y.Z,QTab:_.Z,QInput:I.Z,QIcon:k.Z,QBtn:S.Z})}}]);