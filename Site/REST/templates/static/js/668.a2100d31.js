"use strict";(globalThis["webpackChunkfront_end_carvago"]=globalThis["webpackChunkfront_end_carvago"]||[]).push([[668],{3668:(e,l,o)=>{o.r(l),o.d(l,{default:()=>pe});var a=o(9835),t=o(6970);const n={class:"ZonaAdicionarInteresses"},i={class:"ZonaAdicionarInteresse"},s={key:0,class:"ZonaSemNotificacoes"},r={key:0,class:"row AlertaSemNotificacoes"},c=(0,a._)("p",{class:"TextWarningZonaSemNotificacoes"},"Ative as permissões para poder adicionar adicionar interesses",-1),u={key:1},d={class:"ZonaAdicionarParamAddInteresse"},m=(0,a._)("p",{class:"ZonaAdicionarParamAddInteresseTit"},"Adicionar Interesse",-1),p=(0,a.Uk)(" No results "),b=(0,a.Uk)(" No results "),g=(0,a.Uk)(" No results "),v={class:"ZonaMeusInteressesAtuais"},f={class:"bg-indigo-2",colspan:"5"},w={class:"row no-wrap items-center"},h=(0,a._)("p",{class:"ZonaAdicionarParamAddInteresseTit ZonaAdicionarParamRemInteresseTit"},"Meus Interesses",-1),M={key:0,class:"bg-indigo-3"},k=(0,a._)("th",{class:"text-left"},null,-1),y=(0,a._)("th",{class:"text-right"},"Marca",-1),I=(0,a._)("th",{class:"text-right"},"Modelo",-1),_=[k,y,I],V={key:0,class:"bg-grey-3"},W={class:"text-right"},A={class:"text-right"},Z={key:1,class:"bg-grey-3"},x=(0,a._)("tr",null,[(0,a._)("p",{class:"SemInteressesLabelTabelaVerInteresses"},"Sem interesses")],-1),U=[x];function S(e,l,o,k,y,I){const x=(0,a.up)("q-icon"),S=(0,a.up)("q-btn"),C=(0,a.up)("q-item-section"),P=(0,a.up)("q-item"),q=(0,a.up)("q-select"),H=(0,a.up)("q-input"),F=(0,a.up)("q-markup-table");return(0,a.wg)(),(0,a.iD)("div",n,[(0,a._)("div",i,[o.Notificacoes?(0,a.kq)("",!0):((0,a.wg)(),(0,a.iD)("div",s,[k.temPermissao?((0,a.wg)(),(0,a.iD)("div",u,[(0,a.Wm)(S,{class:"BtnAtivarNotificationZonaInteresse",color:"primary",icon:"mail",label:"Ativar Notificações",onClick:l[0]||(l[0]=e=>k.initPushSubscription())})])):((0,a.wg)(),(0,a.iD)("div",r,[(0,a.Wm)(x,{name:"warning",color:"red",size:"30px"}),c]))])),(0,a._)("div",d,[m,(0,a.Wm)(q,{filled:"",modelValue:k.marca,"onUpdate:modelValue":[l[1]||(l[1]=e=>k.marca=e),l[2]||(l[2]=e=>k.modelo=null)],"option-label":"name","use-input":"","input-debounce":"0",label:"Marca","use-chips":"",options:k.MarcaOptions,onFilter:k.filterFnMarca,behavior:"menu",class:"","bg-color":"white","label-color":"black"},{option:(0,a.w5)((({itemProps:e,opt:l})=>[(0,a.Wm)(P,(0,t.vs)((0,a.F4)(e)),{default:(0,a.w5)((()=>[(0,a.Wm)(C,null,{default:(0,a.w5)((()=>[(0,a._)("p",null,(0,t.zw)(l.name),1)])),_:2},1024)])),_:2},1040)])),_:1},8,["modelValue","options","onFilter"]),null!==k.marca?((0,a.wg)(),(0,a.j4)(q,{key:0,filled:"",modelValue:k.modelo,"onUpdate:modelValue":l[3]||(l[3]=e=>k.modelo=e),"use-input":"","input-debounce":"0",label:"Modelo",options:k.ModeloOptions,onFilter:k.filterFnModelo,behavior:"menu","use-chips":"",class:"Filtro","bg-color":"white","label-color":"black"},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"text-grey"},{default:(0,a.w5)((()=>[p])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])):((0,a.wg)(),(0,a.j4)(q,{key:1,filled:"",modelValue:k.modelo,"onUpdate:modelValue":l[4]||(l[4]=e=>k.modelo=e),"use-input":"","input-debounce":"0",label:"Modelo",options:k.ModeloOptions,onFilter:k.filterFnModelo,behavior:"menu","use-chips":"",class:"Filtro","bg-color":"white","label-color":"black",disable:""},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"text-grey"},{default:(0,a.w5)((()=>[b])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"])),(0,a.Wm)(H,{modelValue:k.precoMin,"onUpdate:modelValue":l[5]||(l[5]=e=>k.precoMin=e),modelModifiers:{number:!0},type:"number",label:"Preço de",filled:"",class:"","bg-color":"white","label-color":"black"},null,8,["modelValue"]),(0,a.Wm)(H,{modelValue:k.precoMax,"onUpdate:modelValue":l[6]||(l[6]=e=>k.precoMax=e),modelModifiers:{number:!0},type:"number",label:"Preço até",filled:"",class:"","bg-color":"white","label-color":"black"},null,8,["modelValue"]),(0,a.Wm)(H,{modelValue:k.anoMin,"onUpdate:modelValue":l[7]||(l[7]=e=>k.anoMin=e),modelModifiers:{number:!0},type:"number",label:"Ano de",filled:"",class:"","bg-color":"white","label-color":"black"},null,8,["modelValue"]),(0,a.Wm)(H,{modelValue:k.anoMax,"onUpdate:modelValue":l[8]||(l[8]=e=>k.anoMax=e),modelModifiers:{number:!0},type:"number",label:"Ano até",filled:"",class:"","bg-color":"white","label-color":"black"},null,8,["modelValue"]),(0,a.Wm)(q,{filled:"",modelValue:k.combustivel,"onUpdate:modelValue":l[9]||(l[9]=e=>k.combustivel=e),"use-chips":"","input-debounce":"0",label:"Combustível",options:k.CombustivelOptions,behavior:"menu",class:"","bg-color":"white","label-color":"black"},{"no-option":(0,a.w5)((()=>[(0,a.Wm)(P,null,{default:(0,a.w5)((()=>[(0,a.Wm)(C,{class:"text-grey"},{default:(0,a.w5)((()=>[g])),_:1})])),_:1})])),_:1},8,["modelValue","options"]),(0,a.Wm)(H,{modelValue:k.quilometroMin,"onUpdate:modelValue":l[10]||(l[10]=e=>k.quilometroMin=e),modelModifiers:{number:!0},type:"number",label:"Quilómetros de",filled:"",class:"","bg-color":"white","label-color":"black"},null,8,["modelValue"]),(0,a.Wm)(H,{modelValue:k.quilometroMax,"onUpdate:modelValue":l[11]||(l[11]=e=>k.quilometroMax=e),modelModifiers:{number:!0},type:"number",label:"Quilómetros até",filled:"",class:"","bg-color":"white","label-color":"black"},null,8,["modelValue"])]),o.Notificacoes&&null!=k.modelo&&null!=k.marca?((0,a.wg)(),(0,a.j4)(S,{key:1,push:"",class:"BtnAddInteresseZonaInteresse",color:"primary",label:"Adicionar",onClick:l[12]||(l[12]=e=>k.addInteresse())})):((0,a.wg)(),(0,a.j4)(S,{key:2,push:"",class:"BtnAddInteresseZonaInteresse",color:"primary",label:"Adicionar",disable:""}))]),(0,a._)("div",v,[(0,a.Wm)(F,{flat:"",bordered:"",class:"TabelaMeusInteresses"},{default:(0,a.w5)((()=>[(0,a._)("thead",null,[(0,a._)("tr",null,[(0,a._)("th",f,[(0,a._)("div",w,[(0,a.Wm)(x,{name:"visibility",size:"20px"}),h])])]),k.interesses.length>0?((0,a.wg)(),(0,a.iD)("tr",M,_)):(0,a.kq)("",!0)]),k.interesses.length>0?((0,a.wg)(),(0,a.iD)("tbody",V,[((0,a.wg)(!0),(0,a.iD)(a.HY,null,(0,a.Ko)(k.interesses,(e=>((0,a.wg)(),(0,a.iD)("tr",{key:e},[(0,a.Wm)(S,{class:"BtnEliminarInteresse",color:"red",icon:"delete",onClick:l=>k.eliminarInteresse(e.marca,e.modelo)},null,8,["onClick"]),(0,a._)("td",W,(0,t.zw)(e.marca),1),(0,a._)("td",A,(0,t.zw)(e.modelo),1)])))),128))])):((0,a.wg)(),(0,a.iD)("tbody",Z,U))])),_:1})])])}o(8964),o(6204),o(8170),o(5231),o(7725),o(9359),o(6408),o(940),o(3667);var C=o(499),P=o(9981),q=o.n(P),H=o(2030);let F=["Google","Facebook","Twitter","Apple"],D=["Google","Facebook","Twitter","Apple","Oracle"];function L(e,l){l(""!==e?()=>{const l=e.toLowerCase();O.value=F.filter((e=>e.name.toLowerCase().indexOf(l)>-1))}:()=>{O.value=F})}function N(e,l){l(""!==e?()=>{const l=e.toLowerCase();T.value=D.filter((e=>e.toLowerCase().indexOf(l)>-1))}:()=>{T.value=D})}const O=(0,C.iH)(F),T=(0,C.iH)(D),Q=(0,C.iH)(null),R=(0,C.iH)(null),E=(0,C.iH)(null),B=(0,C.iH)(null),K=(0,C.iH)(null),j=(0,C.iH)(null),z=(0,C.iH)(null),G=(0,C.iH)(null),J=(0,C.iH)(null),Y=(0,C.iH)(!1);function X(e){const l="=".repeat((4-e.length%4)%4),o=(e+l).replace(/-/g,"+").replace(/_/g,"/"),a=window.atob(o),t=new Uint8Array(a.length);for(let n=0;n<a.length;++n)t[n]=a.charCodeAt(n);return t}async function $(){const e=navigator.permissions.query({name:"notifications"}).then(ee);Y.value=await e}function ee(e){return"granted"===e.state||("prompt"===e.state||(e.state,!1))}const le={name:"AddInteressePage",props:{Notificacoes:{type:Boolean,required:!0}},setup(){const e=["Diesel","Eléctrico","Gasolina","GPL","Híbrido (Diesel)","Híbrido (Gasolina)","Hidrogénio"],l=(0,C.iH)([]);async function o(){let e=!0;try{const l=await q()({method:"get",url:H.Z.URL+"/subscription"}),o=await l.data;if(localStorage.setItem("applicationServerPublicKey",o.public_key),"serviceWorker"in navigator&&"PushManager"in window){console.log("Service Worker and Push is supported");const l=H.Z.URL+"/sw.js";navigator.serviceWorker.register(l).then((function(l){console.log("Service Worker is registered",l);const o=localStorage.getItem("applicationServerPublicKey"),a=X(o);l.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a}).then((async function(e){console.log("User is subscribed."),localStorage.setItem("sub_token",JSON.stringify(e));const l=await q()({method:"post",url:H.Z.URL+"/subscription",data:{subscription_token:e}});await l.data,location.reload()})).catch((function(l){e=!1,console.error("Service Worker Error",l)}))})).catch((function(l){e=!1,console.error("Service Worker Error",l)}))}else e=!1}catch(l){alert(l),e=!1}return e}async function t(){const e=sessionStorage.getItem("IdentificadorCarvago"),l=null===Q.value?"":Q.value.name,o=null===R.value?"":R.value,a=null===E.value?"":E.value,t=null===B.value?"":B.value,n=null===K.value?"":K.value,i=null===j.value?"":j.value,s=null===z.value?"":z.value,r=null===G.value?"":G.value,c=null===J.value?"":J.value,u=await q()({method:"get",url:H.Z.URL+"/AddInteresse",params:{ID:e,Marca:l,Modelo:o,AnoMinimo:i,AnoMaximo:s,PrecoMinimo:t,PrecoMaximo:n,Combustivel:a,KMMinimo:r,KMMaximo:c}});let d=await u.data;d=d.resultado,d&&(Q.value=null,R.value=null,E.value=null,B.value=null,K.value=null,j.value=null,z.value=null,G.value=null,J.value=null,location.reload())}async function n(e,l){const o=sessionStorage.getItem("IdentificadorCarvago"),a=await q()({method:"get",url:H.Z.URL+"/RemoveInteresse",params:{ID:o,Marca:e,Modelo:l}});let t=await a.data;t=t.resultado,t&&location.reload()}return(0,a.bv)((async()=>{const e=await q()({method:"get",url:"https://parallelum.com.br/fipe/api/v2/cars/brands"}),l=await e.data;F=[],l.forEach((e=>{"VW - VolksWagen"===e.name&&(e.name="VW"),F.push(e)}))})),(0,a.bv)((async()=>{await $()})),(0,a.bv)((async()=>{const e=sessionStorage.getItem("IdentificadorCarvago"),o=await q()({method:"get",url:H.Z.URL+"/InteressesUser",params:{ID:e}}),a=await o.data;a.forEach((e=>{const o=e.split(" "),a={marca:o[0].trim().toUpperCase(),modelo:o[1].trim().toUpperCase()};l.value.push(a)}))})),{MarcaOptions:O,ModeloOptions:T,CombustivelOptions:e,marca:Q,modelo:R,combustivel:E,precoMin:B,precoMax:K,anoMin:j,anoMax:z,quilometroMin:G,quilometroMax:J,filterFnMarca:L,filterFnModelo:N,addInteresse:t,interesses:l,initPushSubscription:o,temPermissao:Y,eliminarInteresse:n}},watch:{async marca(e,l){if(null!==e){const l=await q()({method:"get",url:"https://parallelum.com.br/fipe/api/v2/cars/brands/"+e.code+"/models"}),t=await l.data;var o={};for(var a in t.forEach((e=>{o[e.name.split(" ")[0]]=""})),D=[],o)D.push(a)}}}};var oe=o(1639),ae=o(2857),te=o(9379),ne=o(8379),ie=o(490),se=o(1233),re=o(6611),ce=o(6933),ue=o(9984),de=o.n(ue);const me=(0,oe.Z)(le,[["render",S]]),pe=me;de()(le,"components",{QIcon:ae.Z,QBtn:te.Z,QSelect:ne.Z,QItem:ie.Z,QItemSection:se.Z,QInput:re.Z,QMarkupTable:ce.Z})}}]);